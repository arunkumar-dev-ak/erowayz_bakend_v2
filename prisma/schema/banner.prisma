model PreDefinedBanner {
  id                 String       @id @default(uuid())
  name               String       @unique
  title              String?
  subHeading         String?
  description        String?
  userId             String
  bgImageRef         String?
  bgImageRelativeUrl String?
  bgColor            String
  fgImageRef         String?
  fgImageRelativeUrl String?
  textColor          String
  offerType          OfferType
  offerValue         Int
  minApplyValue      Int
  status             BannerStatus @default(ACTIVE)
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
  user               User         @relation(fields: [userId], references: [id])

  @@index([id, name])
}

// model BannerProduct {
//   id          String   @id @default(uuid())
//   name        String
//   description String?
//   price       Float
//   vendorId    String
//   createdAt   DateTime @default(now())
//   updatedAt   DateTime @updatedAt
//   vendor      Vendor   @relation(fields: [vendorId], references: [id])
// }

enum fgBannerImagePosition {
  LEFT
  RIGHT
}

model Banner {
  id                   String             @id @default(uuid())
  name                 String
  nameTamil            String?
  bannerType           BannerType         @default(REGULAR)
  title                String?
  titleTamil           String?
  subTitle             String?
  subTitleTamil        String?
  subHeading           String?
  subHeadingTamil      String?
  description          String?
  descriptionTamil     String?
  vendorId             String
  textColor            String?
  startDateTime        DateTime
  endDateTime          DateTime
  bgColor              String?
  bgImageRef           String?
  bgImageRelativeUrl   String?
  fgImageRef           String?
  fgImageRelativeUrl   String?
  fgImagePosition      fgBannerImagePosition?
  minApplyValue        Int
  offerType            OfferType
  offerValue           Int
  status               BannerStatus       @default(ACTIVE)
  originalPricePerUnit Float?
  qty                  Float?
  productUnitId        String?
  vendor               Vendor             @relation(fields: [vendorId], references: [id])
  bannerItemImages     BannerItemImages[]
  keyWordBanner        KeywordBanner[]

  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt

  @@unique([name, vendorId])
  @@index([id, vendorId])
  @@index([id, name, vendorId])
  @@index([name])

  productUnit       ProductUnit?  @relation(fields: [productUnitId], references: [id], onDelete: Cascade)
}

model KeywordBanner {
  id                   String             @id @default(uuid())
  bannerId             String
  keywordId            String

  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt

  banner               Banner             @relation(fields: [bannerId], references: [id], onDelete: Cascade)
  keyWord              keyWord            @relation(fields: [keywordId], references: [id], onDelete: Cascade)

  @@unique([bannerId,keywordId])
}

model BannerItemImages {
  id          String   @id @default(uuid())
  imageRef    String
  relativeUrl String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  bannerId    String
  banner      Banner   @relation(fields: [bannerId], references: [id], onDelete: Cascade)
}

// model BannerItems {
//   id        String   @id @default(uuid())
//   itemId    String
//   bannerId  String
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
//   banner    Banner   @relation(fields: [bannerId], references: [id], onDelete: Cascade)
//   item      Item     @relation(fields: [itemId], references: [id], onDelete: Cascade)

//   @@unique([itemId, bannerId])
// }

enum BannerType {
  PRODUCT
  REGULAR
}

enum BannerStatus {
  ACTIVE
  INACTIVE
}

enum OfferType {
  FLAT
  PERCENTAGE
}

model BannerVendorItem {
  id                String   @id @default(uuid())
  name              String
  description       String
  price             Float
  discountPrice     Float?
  vendorId          String
  productUnitId     String?
  quantity          Int
  productstatus     ProductStatus @default(OUT_OF_STOCK)
  status            Status        @default(ACTIVE)
  bannerVendorItemsImage  BannerVendorItemsImage[]
  expiryDate        DateTime?

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  vendor            Vendor        @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  productUnit       ProductUnit?   @relation(fields: [productUnitId], references: [id], onDelete: Cascade)
  
  @@unique([vendorId,name])
}

model BannerVendorItemsImage {
  id        String   @id @default(uuid())
  bannerVendorItemId  String
  absoluteUrl         String
  relativeUrl         String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  bannerVendorItem  BannerVendorItem  @relation(fields: [bannerVendorItemId], references: [id], onDelete: Cascade)
}
