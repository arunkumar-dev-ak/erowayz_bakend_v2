/* ----- Services ----- */
model VendorServiceOption {
  id                      String                    @id @default(uuid())
  vendorId                String
  serviceOptionId         String
  status                  Status                    @default(ACTIVE)
  serviceOption           ServiceOption             @relation(fields: [serviceOptionId], references: [id])
  vendor                  Vendor                    @relation(fields: [vendorId], references: [id])
  cartItemVendorServiceOption   CartItemVendorServiceOption[]
  orderItemVendorServiceOption  OrderItemVendorServiceOption[]

  @@unique([vendorId, serviceOptionId])
  @@index([vendorId])
  @@index([serviceOptionId])
}

model Service {
  id                      String                    @id @default(uuid())
  name                    String
  description             String?
  serviceOptionId         String
  vendorId                String
  status                  Status

  serviceImage            ServiceImage[]
  vendorSubService        VendorSubService[]

  createdAt               DateTime                  @default(now())
  updatedAt               DateTime                  @updatedAt

  serviceOption           ServiceOption @relation(fields: [serviceOptionId], references: [id])
  vendor                  Vendor        @relation(fields: [vendorId], references: [id])

  @@unique([name,vendorId,serviceOptionId])
  @@index([name])

}

model VendorSubService {
  id                      String              @id @default(uuid())
  name                    String
  serviceId               String
  price                   Float               @default(0)
  serviceBooking          ServiceBooking[]

  createdAt               DateTime                  @default(now())
  updatedAt               DateTime                  @updatedAt

  service                 Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)

  @@unique([name,serviceId])
  @@index([serviceId])
}

model ServiceImage {
  id                      String                    @id @default(uuid())
  serviceId               String
  relativeUrl             String      @unique
  absoluteUrl             String      @unique

  createdAt               DateTime                  @default(now())
  updatedAt               DateTime                  @updatedAt

  service                 Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
}
