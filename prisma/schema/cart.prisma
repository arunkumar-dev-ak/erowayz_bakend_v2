model Cart {
  id        String     @id @default(uuid())
  userId    String
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  vendorId  String
  user      User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  vendor    Vendor     @relation(fields: [vendorId], references: [id], onDelete: Cascade)
  cartItem  CartItem[]

  @@unique([userId, vendorId])
  @@index([id, userId])
}

model CartItem {
  id                    String              @id @default(uuid())
  cartId                String
  itemId                String
  quantity              Float

  createdAt             DateTime            @default(now())
  updatedAt             DateTime            @updatedAt

  cartItemVendorServiceOption CartItemVendorServiceOption[]
  cart                  Cart                @relation(fields: [cartId], references: [id], onDelete: Cascade)
  item                  Item                @relation(fields: [itemId], references: [id], onDelete: Cascade)

  @@unique([cartId, itemId])
}

model CartItemVendorServiceOption {
  id                    String              @id @default(uuid())
  cartItemId            String
  vendorServiceOptionId String

  createdAt             DateTime            @default(now())
  updatedAt             DateTime            @updatedAt

  vendorServiceOption   VendorServiceOption @relation(fields: [vendorServiceOptionId], references: [id],onDelete: Cascade)
  cartItem              CartItem            @relation(fields: [cartItemId], references: [id], onDelete: Cascade)

  @@unique([cartItemId,vendorServiceOptionId])
}
